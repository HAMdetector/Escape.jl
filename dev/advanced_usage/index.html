<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Advanced usage · Escape.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://HAMdetector.github.io/MyPkg2.jl/advanced_usage/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../quick_start/">Escape.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../quick_start/">Quick start</a></li><li class="is-active"><a class="tocitem" href>Advanced usage</a><ul class="internal"><li><a class="tocitem" href="#Running-sub-models"><span>Running sub-models</span></a></li><li><a class="tocitem" href="#Modifying-sampler-parameters"><span>Modifying sampler parameters</span></a></li><li><a class="tocitem" href="#Using-4-digit-HLA-alleles"><span>Using 4-digit HLA alleles</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Advanced usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Advanced usage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="github.com/HAMdetector/Escape.jl.git" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Advanced-usage"><a class="docs-heading-anchor" href="#Advanced-usage">Advanced usage</a><a id="Advanced-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-usage" title="Permalink"></a></h1><h2 id="Running-sub-models"><a class="docs-heading-anchor" href="#Running-sub-models">Running sub-models</a><a id="Running-sub-models-1"></a><a class="docs-heading-anchor-permalink" href="#Running-sub-models" title="Permalink"></a></h2><p>By default, the <code>run_model</code> function uses the full HAMdetector model that includes the horseshoe prior, phylogeny information and epitope prediction. Reduced versions of the full model can be run by supplying an additional positional argument:</p><pre><code class="language-julia">using Escape

data = HLAData(
    alignment_file = &quot;/home/user/Desktop/alignment.fasta&quot;,
    tree_file = &quot;/home/user/Desktop/phylogeny.tree&quot;
)

result = Escape.run_model(HLAModel{4}(), data)</code></pre><p>The different versions are:</p><ul><li>1: A simple logistic regression model</li><li>2: Like model 1, but additionally with horseshoe prior</li><li>3: Like model 2, but additionally with phylogeny information included</li><li>4: Full HAMdetector model, like model 3 but with epitope prediction included.</li></ul><p>Note that the full HAMdetector model includes all the previous models as a special case.</p><h2 id="Modifying-sampler-parameters"><a class="docs-heading-anchor" href="#Modifying-sampler-parameters">Modifying sampler parameters</a><a id="Modifying-sampler-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-sampler-parameters" title="Permalink"></a></h2><p>By default, 4 chains with 1000 iterations each and a warmup of 300 samples are drawn. This should be plenty for all use-cases, but can be changed as shown below:</p><pre><code class="language-julia">using Escape

data = HLAData(
    alignment_file = &quot;/home/user/Desktop/alignment.fasta&quot;,
    tree_file = &quot;/home/user/Desktop/phylogeny.tree&quot;
)

result = Escape.run_model(
    data, chains = 4, iter = 1000, warmup = 300, stan_args = &quot;adapt_delta=0.95&quot;
)</code></pre><p>For a full list of the CmdStan options, please refer to the <a href="https://mc-stan.org/docs/cmdstan-guide/mcmc-intro.html">CmdStan sampling parameters</a>. It should not be necessary to modify the <code>stan_args</code> argument, it is just listed here for completeness. </p><h2 id="Using-4-digit-HLA-alleles"><a class="docs-heading-anchor" href="#Using-4-digit-HLA-alleles">Using 4-digit HLA alleles</a><a id="Using-4-digit-HLA-alleles-1"></a><a class="docs-heading-anchor-permalink" href="#Using-4-digit-HLA-alleles" title="Permalink"></a></h2><p>By default, HAMdetector uses HLA alleles with 2-digit accuracy. To use HLA alleles with 4-digit accuracy (if supplied), set the <code>allele_depth</code> keyword argument to 2 (default is 1).</p><pre><code class="language-julia">using Escape

data = HLAData(
    alignment_file = &quot;/home/user/Desktop/alignment_with_4_digit_alleles.fasta&quot;,
    tree_file = &quot;/home/user/Desktop/phylogeny.tree&quot;,
    allele_depth = 2
)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quick_start/">« Quick start</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.3 on <span class="colophon-date" title="Thursday 1 July 2021 21:40">Thursday 1 July 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
